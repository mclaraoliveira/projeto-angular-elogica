<div class="container-fluid d-flex justify-content-center align-items-center min-vh-100 background-container">
  <div class="d-flex flex-column align-items-center w-100">
    <!-- Título -->
    <h2 class="mb-4 text-center">
      {{ pensamentoParaEditar ? 'Edite seu pensamento:' : 'Adicione um pensamento novo:' }}
    </h2>

    <!-- Formulário -->
    <form [formGroup]="formulario" (ngSubmit)="onSubmit()" class="formulario shadow-lg h-100">
      <!-- Campo Pensamento -->
      <div class="mb-3">
        <label for="pensamento" class="form-label">Pensamento</label>
        <textarea
          class="form-control"
          id="pensamento"
          rows="3"
          placeholder="Digite seu pensamento..."
          formControlName="pensamento"
          [class.is-invalid]="f['pensamento'].invalid && f['pensamento'].touched"
        ></textarea>

        @if (f['pensamento'].invalid && f['pensamento'].touched) {
          <div class="invalid-feedback">
            @if (f['pensamento'].errors?.['required']) {
              <div>O pensamento é obrigatório</div>
            }
            @if (f['pensamento'].errors?.['maxlength']) {
              <div>Máximo de 300 caracteres</div>
            }
          </div>
        }
      </div>

      <!-- Campo Autor(a) ou Fonte -->
      <div class="mb-3">
        <label for="autor" class="form-label">Autor(a) ou Fonte</label>
        <input
          type="text"
          class="form-control"
          id="autor"
          placeholder="Insira o nome do(a) autor(a) ou fonte"
          formControlName="autor"
          [class.is-invalid]="f['autor'].invalid && f['autor'].touched"
        />

        @if (f['autor'].invalid && f['autor'].touched) {
          <div class="invalid-feedback">
            @if (f['autor'].errors?.['required']) {
              <div>O autor é obrigatório</div>
            }
            @if (f['autor'].errors?.['maxlength']) {
              <div>Máximo de 50 caracteres</div>
            }
          </div>
        }
      </div>

      <!-- Seleção do Modelo do Card -->
      <div class="mb-5">
        <label class="form-label mb-4">Selecione o modelo do card:</label>
        <div class="d-flex align-items-center">
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              id="modelo1"
              value="1"
              formControlName="modelo"
            />
            <label class="form-check-label" for="modelo1">Modelo 1</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              id="modelo2"
              value="2"
              formControlName="modelo"
            />
            <label class="form-check-label" for="modelo2">Modelo 2</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              id="modelo3"
              value="3"
              formControlName="modelo"
            />
            <label class="form-check-label" for="modelo3">Modelo 3</label>
          </div>
        </div>
      </div>

      <!-- Cards de Prévia -->
      <div class="row area-cards">
        <div class="col-md-4">
          <div class="card card-previa card-azul-escuro h-100">
            <div class="card-body">
              <h3 class="card-previa-titulo">Previa</h3>
              <p class="texto-card">
                {{ formulario.value.pensamento || 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor.' }}
              </p>
              <p class="autor-card">{{ formulario.value.autor || 'Autora da Silva Sauro' }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card card-previa card-azul-claro h-100">
           <div class="card-body">
            <h3 class="card-previa-titulo">Previa</h3>
              <p class="texto-card">
                {{ formulario.value.pensamento || 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor.' }}
              </p>
              <p class="autor-card">{{ formulario.value.autor || 'Autora da Silva Sauro' }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card card-previa card-verde h-100">
            <div class="card-body">
              <h3 class="card-previa-titulo">Previa</h3>
              <p class="texto-card">
                {{ formulario.value.pensamento || 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor.' }}
              </p>
              <p class="autor-card">{{ formulario.value.autor || 'Autora da Silva Sauro' }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Botões -->
      <div class="d-flex justify-content-center">
        <button type="submit" class="botao me-5" [disabled]="formulario.invalid">
          {{ pensamentoParaEditar ? 'Atualizar' : 'Salvar' }}
        </button>
        <button type="button" class="botao me-5" (click)="cancelar()">Cancelar</button>
        <button type="button" class="botao" (click)="voltarParaMural()">Voltar para Mural</button>
      </div>
    </form>
  </div>
</div>
